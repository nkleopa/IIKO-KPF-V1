Периоды действия 

  

    

  
Расписание
Период действия (интервал) по дням недели
Получение расписаний
Параметры запроса
Что в ответе
Пример запроса и результата
Получение расписания по идентификатору
Параметры запроса
Пример запроса и результата 

  
  

  

API периодов действий

Версия iiko: 7.8
Описание полей
Расписание

PeriodScheduleDto

ПолеТипОписание
	id	UUID	Идентификатор.
	name	String	Название.
	deleted	Boolean	Удалена или нет.
	periods	List<PeriodScheduleItemDto>	Список интервалов.
Период действия (интервал) по дням недели

PeriodScheduleItemDto

ПолеТипОписание
	begin	String	Начало полуинтервала в виде "HH:mm".
	end	String	Конец полуинтервала в виде "HH:mm".
	daysOfWeek	List<DayOfWeek>	
Дни недели, в которых действует интервал.

DayOfWeek
ЗначениеОписание
	1	понедельник
	2	вторник
	3	среда
	4	четверг
	5	пятница
	6	суббота
	7	воскресенье

Получение расписаний

  
    
	
        
      	
        
https://host:port/resto/api/v2/entities/periodSchedules
      
    
  

Параметры запроса

Параметр
Тип
Описание
	includeDeleted	Boolean	Включать ли в ответ удаленные элементы. По умолчанию false.
	id	List<UUID>	Список идентификаторов расписаний, которые требуется получить. Если не задано, то фильтрации по идентификаторам нет.
	revisionFrom	Integer	В ответе будут сущности с ревизией выше данной. По умолчанию '-1'.
Что в ответе

Список расписаний.
Поле revision - максимальная ревизия, доступная для выгрузки во внешние системы на момент запроса (это значит, что в базе присутствуют записи с такой ревизией, а записей с ревизией выше этой в базе нет).
Эту ревизию можно использовать в качестве параметра revisionFrom в следующем запросе на получение списка расписаний.
Пример запроса и результата

Запрос

https://localhost:8080/resto/api/v2/entities/periodSchedules

  

    [+]
    
      Результат
    
  
  

    [-]
    
     Результат
    
  
  

     
	
Copy Code
JSON
	{
  "result": "SUCCESS",
  "errors": [
  ],
  "response": [
    {
      "id": "598ce53a-c49c-4cd5-8248-1e2b4f0994cf",
      "name": "Рабочий полдник",
      "deleted": false,
      "periods": [
        {
          "begin": "16:00",
          "end": "17:00",
          "daysOfWeek": [
            1,
            2,
            3,
            4,
            5                    
          ]
          
        }
        
      ]
      
    },
    {
      "id": "a31ffb8a-05dd-42a1-9cc6-b1c6d4826ddf",
      "name": "Выходные",
      "deleted": false,
      "periods": [
        {
          "begin": "19:00",
          "end": "23:59",
          "daysOfWeek": [
            5                    
          ]
          
        },
        {
          "begin": "00:00",
          "end": "23:59",
          "daysOfWeek": [
            6                    
          ]
          
        },
        {
          "begin": "00:00",
          "end": "00:00",
          "daysOfWeek": [
            7                    
          ]
          
        }
        
      ]
      
    }
    
    ],
  "revision": 187512
}
  

Получение расписания по идентификатору
        
	                	         
https://host:port/resto/api/v2/entities/periodSchedules                
Параметры запроса

Параметр
Тип
Описание
	id	UUID	Идентификатор расписания.
Пример запроса и результата

Запрос

https://localhost:8080/resto/api/v2/entities/periodSchedules/byId?id=598ce53a-c49c-4cd5-8248-1e2b4f0994cf

  

    [+]
    
      Результат
    
  
  

    [-]
    
     Результат
    
  
  

     
	
Copy Code
JSON
	{
  "id": "598ce53a-c49c-4cd5-8248-1e2b4f0994cf",
  "name": "Рабочий полдник",
  "deleted": false,
  "periods": [
    {
      "begin": "16:00",
      "end": "17:00",
      "daysOfWeek": [
        1,
        2,
        3,
        4,
        5            
      ]
      
    }
    
    ]
}
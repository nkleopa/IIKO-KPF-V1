<!DOCTYPE html><html lang="ru-RU" dir="ltr"><head><style type="text/css">.ArticleViewer_searchKeywords{background-color: yellow !important;}body{overflow:hidden;}</style>
<link rel="canonical" href="/articles/api-documentations/prednastroennye-olap-otchety-vv2"/>
<title>Преднастроенные OLAP-отчеты </title><script type="text/javascript">//<!--
var imgPopupTexts={openInNewWindowText: 'Открыть в новом окне', closeText: 'Закрыть'};var isArticlesNavViaMessage=true;var articleTitleText='Преднастроенные OLAP-отчеты ';
//--></script><link rel="stylesheet" type="text/css" href="/resources/Styles/api-documentations/NewStyle.css"/><link rel="stylesheet" type="text/css" href="/resources/Styles/api-documentations/Projects2.css"/><link rel="stylesheet" type="text/css" href="/resources/Styles/api-documentations/NewStyle1.css"/><link rel="stylesheet" type="text/css" href="/style-bundles/article-published.css?v=1.0.9482.29209"/><script src="/resources/Scripts/api-documentations/Script2.js" type="text/javascript"></script><script src="/resources/Scripts/api-documentations/highlight.pack2.js" type="text/javascript"></script><script src="/script-bundles/article-published.js?v=1.0.9482.29209" type="text/javascript"></script><meta charset="utf-8"><meta http-equiv="Content-Type" content="text/html;charset=utf-8"></head><body><span id="__clhTop"></span><!-- используется для Sidebar -->

  <div class="sidebar">
    <p>
  <ul class="CHMiniToc"><li class="CHMiniToc_heading2"><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1074633278" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1074633278&#39;,this);">Список преднастроенных не удаленных отчетов (конфигураций)</a></li><li class="CHMiniToc_heading2"><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h2__2011681203" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h2__2011681203&#39;,this);">Список преднастроенных не удаленных отчетов (конфигураций), отфильтрованных по типу OLAP-отчетов</a></li><li class="CHMiniToc_heading3 CHMiniToc_indent1"><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h3__998506674" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h3__998506674&#39;,this);">Параметры запроса</a></li><li class="CHMiniToc_heading2"><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1520457598" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1520457598&#39;,this);">Получение отчета по сохраненной конфигурации (по ИД)</a></li><li class="CHMiniToc_heading3 CHMiniToc_indent1"><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h3__1602332892" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h3__1602332892&#39;,this);">Параметры запроса</a></li><li class="CHMiniToc_heading3 CHMiniToc_indent1"><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h3_1387997121" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h3_1387997121&#39;,this);">Пример запроса</a></li><li class="CHMiniToc_heading3 CHMiniToc_indent1"><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/id-ПреднастроенныеOLAP-отчеты-ResponseBody" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/id-ПреднастроенныеOLAP-отчеты-ResponseBody&#39;,this);">Тело ответа</a></li></ul>&nbsp;
</p>
<p>
  
  <br/>
</p>
  </div>
<h2 id="h2__1074633278" data-has-heading-anchor="true">Список преднастроенных не удаленных отчетов (конфигураций)<a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1074633278" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1074633278&#39;,this);"></a></h2><p><span style="font-family: &quot;Open Sans&quot;, Arial, Helvetica, sans-serif;">Версия iiko: 4.2</span></p><table class="CHHttpRequest CHHttpRequest_get">
  <tbody>
    <tr><td class="CHHttpRequest_headerImg">
        <img src="/resources/Storage/api-documentations/http_request_get.png" alt="GET Request" style="max-width: 100%; height: auto;" loading="lazy"/>
      </td><td class="CHHttpRequest_headerText">
        https://host:port/resto/api/v2/reports/olap/presets
      </td></tr>
    
  </tbody>
</table><br/><h2 id="h2__2011681203" style="text-align: center;" data-has-heading-anchor="true"><span style="font-size: 18pt;">Список преднастроенных не удаленных отчетов (конфигураций), отфильтрованных по типу OLAP-отчетов</span><a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h2__2011681203" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h2__2011681203&#39;,this);"></a></h2><p><span style="font-family: &quot;Open Sans&quot;, Arial, Helvetica, sans-serif;">Версия iiko: 4.2</span></p><table class="CHHttpRequest CHHttpRequest_get">   <tbody>     <tr><td class="CHHttpRequest_headerImg ">         <img src="/resources/Storage/api-documentations/http_request_get.png" alt="GET Request" style="height: auto; max-width: 100%;" loading="lazy"/>       </td><td class="CHHttpRequest_headerText ">         https://host:port/resto/api/v2/reports/olap/presets/{presetType}       </td></tr>        </tbody> </table><h3 id="h3__998506674" data-has-heading-anchor="true">Параметры запроса<a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h3__998506674" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h3__998506674&#39;,this);"></a></h3><table class="CHTable" cellspacing="0" cellpadding="0" style="width: 100%; border-collapse: collapse;"><thead><tr><th style="width: 50%;" scope="col"><span style="font-size: 10pt;">Параметр</span><br/></th><th style="width: 50%;" scope="col"><span style="font-size: 10pt;">Описание</span><br/></th></tr></thead><tbody><tr><td style="width: 50%;"><span style="font-size: 10pt;"><strong>presetType</strong></span><br/></td><td style="width: 50%;"><span style="font-size: 10pt;">[<strong>stock</strong>, <strong>sales</strong>, <strong>transactions</strong>, <strong>deliveries</strong>]- типы OLAP-отчетов (контроль хранения остатков, продажи, проводки, доставка)</span><br/></td></tr></tbody></table><h2 id="h2__1271338415"><span style="font-weight: normal; font-size: 18pt;"><br/></span></h2><h2 id="h2__1520457598" style="text-align: center;" data-has-heading-anchor="true">Получение отчета по сохраненной конфигурации (по ИД)<a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1520457598" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h2__1520457598&#39;,this);"></a></h2><p><span style="font-family: &quot;Open Sans&quot;, Arial, Helvetica, sans-serif;">Версия iiko: 4.2</span></p><table class="CHHttpRequest CHHttpRequest_get">   <tbody>     <tr><td class="CHHttpRequest_headerImg ">         <img src="/resources/Storage/api-documentations/http_request_get.png" alt="GET Request" style="height: auto; max-width: 100%;" loading="lazy"/>       </td><td class="CHHttpRequest_headerText ">         https://host:port/resto/api/v2/reports/olap/byPresetId/{presetId}       </td></tr>        </tbody> </table><h3 id="h3__1602332892" data-has-heading-anchor="true">Параметры запроса<a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h3__1602332892" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h3__1602332892&#39;,this);"></a></h3><table class="CHTable" cellspacing="0" cellpadding="0" style="width: 812.763px; height: 428.2px;"><thead><tr><th scope="col" style="width: 50%;"><span style="font-size: 10pt;">Параметр</span><br/></th><th scope="col" style="width: 50%;"><span style="font-size: 10pt;">Описание</span><br/></th></tr></thead><tbody><tr><td style="width: 50%;"><span style="font-size: 10pt;">presetId</span><br/></td><td style="width: 50%;"><span style="font-size: 10pt;">UUID пресета (обязательный)</span><br/></td></tr><tr><td style="width: 50%;"><span style="font-size: 10pt;">summary</span><br/></td><td style="width: 50%;"><p><span style="font-size: 10pt;">Boolean. Вычислять итоговое значение. По умолчанию выставлен в true. </span></p><p><span style="font-size: 10pt;">С Version (iiko) 5.3</span><br/></p></td></tr><tr><td style="width: 50%;"><span style="font-size: 10pt;">dateFrom</span><br/></td><td style="width: 50%;"><span style="font-size: 10pt;">дата в формате YYYY-MM-DDThh:mm:ss (необязательный, включена в период)</span><br/></td></tr><tr><td style="width: 50%;"><span style="font-size: 10pt;">dateTo</span><br/></td><td style="width: 50%;"><span style="font-size: 10pt;">дата в формате YYYY-MM-DDThh:mm:ss (необязательный, не включена в период)</span><br/></td></tr><tr><td style="width: 50%;"><span style="font-size: 10pt;">key</span><br/></td><td style="width: 50%;"><span style="font-size: 10pt;">Токен</span></td></tr></tbody></table><div data-hasbody="true" data-macro-name="note"><p style="text-align: justify;"><span style="font-size: 10pt;">Формат сохраненных конфигураций отчетов при обновлении iiko может измениться. Соответственно меняются поля возвращаемого отчета.</span></p><p style="text-align: justify;"><span style="font-size: 10pt;">Чтобы получать отчет всегда в одном и том же формате, следует передавать полученную из <strong>/v2/reports/olap/presets</strong> конфигурацию в API OLAP-отчетов: <strong>/v2/reports/olap</strong></span></p></div><div data-hasbody="true" data-macro-name="note"> <div><p style="text-align: justify;"><span style="font-size: 10pt;">Поля  агрегации, учитывающие начальный остаток товара и денежный остаток  (StartBalance.Amount, StartBalance.Money, FinalBalance.Amount,  FinalBalance.Money) вычисляются суммированием всей таблицы проводок <strong>за все время</strong>  работы системы (всей базы данных) без каких-либо оптимизаций. То есть,  такой запрос может выполняться очень долго и замедлять работу сервера.</span><br/><span style="font-size: 10pt;">Если  начальный остаток необходим, оставляйте в этом OLAP-запросе только те  поля группировки, по которым он действительно необходим (как правило,  это Store и Product.Name), и вызывайте такой запрос <strong>как можно реже</strong> и в <strong>не рабочее</strong> время.</span><br/><span style="font-size: 10pt;">В 5.2 добавлено API для быстрого получения остатков: Отчеты по балансам.</span></p><p style="text-align: justify;"><span style="font-size: 10pt;">В 5.5 отчеты с остатками оптимизированы с использованием балансовых таблиц ATransactionSum, ATransactionBalance, при условии, что применяются группировки и фильтры по полям из этих таблиц, см. признак StartBalanceOptimizable в описании полей.</span>           </p><h3 id="h3_1387997121" data-has-heading-anchor="true">Пример запроса<a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/h3_1387997121" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/h3_1387997121&#39;,this);"></a></h3><p style="text-align: justify;" class="code"><span style="font-size: 10pt;">https://host:port/resto/api/v2/reports/olap/byPresetId/c80230c5-5d47-41d2-a055-367742db889d?key=5c2d45fd-5008-b18e-7f7f-cdc18a088cfd&amp;dateFrom=2025-01-01&amp;dateTo=2025-01-31<br/></span>           </p></div></div><h3 id="id-ПреднастроенныеOLAP-отчеты-ResponseBody" data-has-heading-anchor="true">Тело ответа<a href="/articles/api-documentations/prednastroennye-olap-otchety-vv2/a/id-ПреднастроенныеOLAP-отчеты-ResponseBody" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/prednastroennye-olap-otchety-vv2/a/id-ПреднастроенныеOLAP-отчеты-ResponseBody&#39;,this);"></a></h3><p><table class="CHCodeSample_container notranslate" cellspacing="0" cellpadding="0"><tr class="CHCodeSample_tr1"><td class="CHCodeSample_header"><div class="CHCodeSample_copyCode nonPrintable"><a onclick="copyCodeSample(this)" href="javascript:void(0)">Copy Code</a></div><div class="CHCodeSample_langName notranslate">Код</div></td></tr><tr class="CHCodeSample_tr2"><td class="CHCodeSample_code notranslate cm-s-default"><pre>[{<br/>  "id" : "UUID",<br/>   "name" : "Name",<br/>  "reportType": "EnumValue",<br/>  "groupByRowFields": [<br/>    "groupByRowFieldName1",<br/>    "groupByRowFieldName2",<br/>    ...,<br/>    "groupByRowFieldNameN"<br/>  ],<br/>  "groupByColFields": [<br/>    "groupByColFieldName1",<br/>    "groupByColFieldName2",<br/>    ...,<br/>    "groupByColFieldNameL"<br/>  ],<br/>  "aggregateFields": [<br/>    "AggregateFieldName1",<br/>    "AggregateFieldName2",<br/>    ...,<br/>    "AggregateFieldNameM"<br/>  ],<br/>  "filters": {<br/>    filter1,<br/>    filter2,<br/>    ...<br/>    filterK<br/>  }<br/>}<br/>,<br/>...<br/>...<br/>...<br/>]</pre></td></tr></table></p><p><br/></p><script src="/resources/Scripts/Lightbox/lightbox-plus-jquery.min.js"></script> <!-- скрипт используется для галереи картинок-->
<script type="text/javascript">hljs.initHighlightingOnLoad();</script> <!-- скрипт используется для подсветки примеров кода --></body></html>
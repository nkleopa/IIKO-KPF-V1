<!DOCTYPE html><html lang="ru-RU" dir="ltr"><head><style type="text/css">.ArticleViewer_searchKeywords{background-color: yellow !important;}body{overflow:hidden;}</style>
<link rel="canonical" href="/articles/api-documentations/avtorizatsiya"/>
<title>Авторизация </title><script type="text/javascript">//<!--
var imgPopupTexts={openInNewWindowText: 'Открыть в новом окне', closeText: 'Закрыть'};var isArticlesNavViaMessage=true;var articleTitleText='Авторизация ';
//--></script><link rel="stylesheet" type="text/css" href="/resources/Styles/api-documentations/NewStyle.css"/><link rel="stylesheet" type="text/css" href="/resources/Styles/api-documentations/Projects2.css"/><link rel="stylesheet" type="text/css" href="/resources/Styles/api-documentations/NewStyle1.css"/><link rel="stylesheet" type="text/css" href="/style-bundles/article-published.css?v=1.0.9482.29209"/><script src="/resources/Scripts/api-documentations/Script2.js" type="text/javascript"></script><script src="/resources/Scripts/api-documentations/highlight.pack2.js" type="text/javascript"></script><script src="/script-bundles/article-published.js?v=1.0.9482.29209" type="text/javascript"></script><meta charset="utf-8"><meta http-equiv="Content-Type" content="text/html;charset=utf-8"></head><body><span id="__clhTop"></span><!-- используется для Sidebar -->

  <div class="sidebar">
    <p>
  <ul class="CHMiniToc"><li class="CHMiniToc_heading2"><a href="/articles/api-documentations/avtorizatsiya/a/h2_1617055750" onclick="return n(&#39;!api-documentations/avtorizatsiya/a/h2_1617055750&#39;,this);">Авторизация</a></li><li class="CHMiniToc_heading2"><a href="/articles/api-documentations/avtorizatsiya/a/h2__1074617610" onclick="return n(&#39;!api-documentations/avtorizatsiya/a/h2__1074617610&#39;,this);">Выход</a></li></ul>&nbsp;
</p>
<p>
  
  <br/>
</p>
  </div>
<table class="warningBox" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td class="warningBoxImageCell">         <img alt="Warning" src="/resources/Storage/api-documentations/api-documentations/warning.png" style="max-width: 100%; height: auto;" loading="lazy"/>       </td>
      <td class="warningBoxText">         При авторизации вы занимаете один слот лицензии. Токен,&nbsp;который вы получаете при авторизации, можно использовать до того момента, пока он не перестанет работать. И если у вас только одна лицензия сервера, а вы уже получили токен, следующее обращение к серверу за токеном вызовет ошибку. Если вам негде хранить токен при работе с сервером API, рекомендуем вам разлогиниться, что приводит к отпусканию лицензии.       </td>
    </tr>
  </tbody>
</table>
<h2 id="h2_1617055750" style="text-align: center;" data-has-heading-anchor="true">   Авторизация<a href="/articles/api-documentations/avtorizatsiya/a/h2_1617055750" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/avtorizatsiya/a/h2_1617055750&#39;,this);"></a></h2>
<table class="CHHttpRequest CHHttpRequest_post" cellspacing="0" cellpadding="0" style="width: 926px; height: 54px;">
  <tbody>
    <tr style="height: 38px;"><td class="CHHttpRequest_headerImg  " style="width: 47px;"><span style="font-size: 14pt;">         <img src="/resources/Storage/api-documentations/http_request_post.png" alt="POST Request" style="height: auto; width: 47px; max-width: 100%;" loading="lazy"/>       </span></td><td class="CHHttpRequest_headerText  "><span style="font-weight: normal; font-family: Consolas, monaco, monospace;">&nbsp;<b><span style="font-size: 14pt;">https://host:port/resto/api/auth?login=[login]&amp;pass=[sha1passwordhash]</span></b></span><span style="font-weight: normal;">       </span></td></tr>
    </tbody>
</table><p><b>Пример запроса</b></p><p class="code"><span style="font-family: Courier;">https://localhost:8080/resto/api/auth?login=admin&amp;pass=2155245b2c002a1986d3f384af93be813537a476</span></p><pre style="margin-left: 40px;"><span style="font-family: Courier;"><span style=""><span style=""></span></span></span></pre><p><b>Параметры запроса</b></p><table class="CHTable" cellspacing="0" cellpadding="0" style="width: 100%; border-collapse: collapse;"><thead><tr style="height: 40px;"><th style="width: 33.3333%;" scope="col">Параметр<br/></th><th style="width: 33.3333%;" scope="col">Описание<br/></th></tr></thead><tbody><tr style="height: 63px;"><td style="width: 33.3333%;">
        <p>         login</p>
        </td><td style="width: 33.3333%;">
        <p>Логин пользователя         </p>        
      <br/></td></tr><tr><td style="width: 33.3333%;">
        <p>pass</p>         <br/></td><td style="width: 33.3333%;"><p>SHA1 hash от пароля         </p>
        <p>           в bash его можно получить так:&nbsp;printf "resto#test" | sha1sum</p>
      <br/></td></tr></tbody></table><p><b><span style="font-size: 14pt;">Что в ответе&nbsp;</span></b></p><p>Строка-токен, который необходимо передавать как cookie с именем key или как параметр&nbsp;key&nbsp;всех запросов.</p><p>Начиная с 4.3 сервер сам устанавливает cookie&nbsp;key.</p><p> </p><h2 id="h2__1074617610" data-has-heading-anchor="true">Выход<a href="/articles/api-documentations/avtorizatsiya/a/h2__1074617610" class="CHHeadingLink" title="Link to this heading" aria-hidden="true" onclick="return n(&#39;!api-documentations/avtorizatsiya/a/h2__1074617610&#39;,this);"></a></h2>
<table class="CHHttpRequest CHHttpRequest_post" cellspacing="0" cellpadding="0" style="width: 657.038px; height: 54px;">
  <tbody>
    <tr style="height: 38px;"><td class="CHHttpRequest_headerImg"><span style="font-family: &quot;Open Sans&quot;, Arial, Helvetica, sans-serif;"><span style=""><span style="font-weight: normal;">         <img src="/resources/Storage/api-documentations/http_request_post.png" alt="POST Request" style="max-width: 100%; height: auto;" loading="lazy"/>       </span></span></span></td><td class="CHHttpRequest_headerText"><span style="font-weight: normal;">&nbsp;<span style=""></span><span style="font-family: Consolas, monaco, monospace;"><b>&nbsp;<span style="font-family: &quot;Open Sans&quot;, Arial, Helvetica, sans-serif;"><span style="font-size: 14pt;">https://host:port/resto/api/logout?key=[token]</span></span></b></span></span><span style="font-weight: normal;">                      </span></td></tr>
    </tbody>
</table><p></p><pre style="margin-left: 40px;"><span style="font-family: Consolas, monaco, monospace;"><span style=""><span style=""><span style=""></span></span></span></span></pre><p><b><span style="font-size: 14pt;">Что в ответе&nbsp;</span></b></p><p>Строка-токен, полученная при авторизации.<span style="font-weight: bold;">&nbsp;</span></p><p><b>Пример запроса</b></p><p><span style="font-family: Courier;"><span class="code" style="font-family: Courier;">https://localhost:8080/resto/api/logout?key=b354d18c-3d3a-e1a6-c3b9-9ef7b5055318</span></span></p><p class="code"><span style="font-family: Courier;">https://localhost:8080/resto/api/logout&nbsp;c cookie key=c0508074-a052-6276-bf72-871f7acb865e</span></p><pre style="margin-left: 40px;"></pre><p style="margin-left: 40px;"><br/></p>
        <p style="margin-left: 40px;">&nbsp;&nbsp;</p>
        <script src="/resources/Scripts/Lightbox/lightbox-plus-jquery.min.js"></script> <!-- скрипт используется для галереи картинок-->
<script type="text/javascript">hljs.initHighlightingOnLoad();</script> <!-- скрипт используется для подсветки примеров кода --></body></html>